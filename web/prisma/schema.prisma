generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

enum Category {
  GROCERIES
  DINING
  TRANSPORTATION
  ENTERTAINMENT
  SHOPPING
  UTILITIES
  HEALTHCARE
  EDUCATION
  TRAVEL
  SUBSCRIPTIONS
  PERSONAL_CARE
  RENT
  INSURANCE
  INCOME
  MISC
}

model User {
  id    String @id @default(uuid())
  email String @unique

  firstName String? @map("first_name")
  lastName  String? @map("last_name")

  createdAt DateTime @default(now()) @map("created_at")

  records Record[]

  @@map("users")
}

model Record {
  id       String   @id @default(uuid())
  store    String
  amount   Float
  category Category
  date     DateTime
  imageUrl String   @map("image_url")
  notes    String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt @map("updated_at")

  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId String @map("user_id")

  @@map("records")
}
